<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>OD on the GO â€“ Conference Games</title>

<style>
body{
  font-family: Arial, sans-serif;
  background:#fafafa;
  margin:0;
}
.wrap{
  max-width:1100px;
  margin:24px auto;
  padding:0 14px;
  text-align:center;
}
.toggleBar{
  display:flex;
  flex-wrap:wrap;
  gap:10px;
  justify-content:center;
  margin:16px 0 20px;
}
.toggleBtn{
  padding:12px 16px;
  border-radius:10px;
  border:1px solid #ccc;
  background:#fff;
  font-weight:900;
  cursor:pointer;
}
.toggleBtn.active{
  background:#111;
  color:#fff;
}
.panel{
  display:none;
  background:#fff;
  border:1px solid #eee;
  border-radius:16px;
  padding:18px;
  box-shadow:0 2px 12px rgba(0,0,0,.06);
}
.panel.active{display:block;}
.action{
  margin-top:14px;
  padding:12px 18px;
  font-size:16px;
  font-weight:900;
  border:none;
  border-radius:10px;
  background:#111;
  color:#fff;
  cursor:pointer;
}
.result{
  display:none;
  margin:14px auto 0;
  padding:14px;
  max-width:520px;
  border:1px solid #cce5ff;
  background:#f0f7ff;
  border-radius:12px;
}
.big{font-size:22px;font-weight:900;}
.small{font-size:13px;color:#444;margin-top:6px;}
</style>
</head>

<body>
<div class="wrap">
<h2>ğŸ® OD on the GO Conference Games</h2>
<div class="small">Demo mode â€” no email capture yet</div>

<div class="toggleBar">
  <button id="btnScratch" class="toggleBtn active">ğŸª™ Scratch</button>
  <button id="btnSpin" class="toggleBtn">ğŸ› Spin</button>
  <button id="btnSlots" class="toggleBtn">ğŸ° Slots</button>
  <button id="btnFit" class="toggleBtn">ğŸ‘“ Glasses</button>
  <button id="btnLaunch" class="toggleBtn">ğŸ¹ Launch</button>
</div>

<!-- SCRATCH -->
<div id="panelScratch" class="panel active">
  <h3>ğŸª™ Scratch to Win</h3>
  <canvas id="scratchCanvas" width="480" height="200"
    style="border-radius:12px;border:1px solid #ccc;"></canvas>
  <div id="scratchPrize" class="big">â€”</div>
  <button class="action" id="scratchReset">Play Again</button>
</div>

<!-- SPIN -->
<div id="panelSpin" class="panel">
  <h3>ğŸ› Spin the Phoropter</h3>
  <button class="action" id="spinBtn">SPIN</button>
  <div id="spinResult" class="result">
    <div class="big" id="spinBig"></div>
    <div class="small" id="spinSmall"></div>
  </div>
</div>

<!-- SLOTS -->
<div id="panelSlots" class="panel">
  <h3>ğŸ° Optometry Slots</h3>
  <div style="font-size:64px" id="slotIcons">ğŸ‘“ ğŸ§¿ ğŸ’§</div>
  <button class="action" id="slotsSpin">SPIN</button>
  <div id="slotsResult" class="result">
    <div class="big" id="slotsBig"></div>
    <div class="small" id="slotsSmall"></div>
  </div>
</div>

<!-- GLASSES -->
<div id="panelFit" class="panel">
  <h3>ğŸ‘“ Put the Glasses On</h3>
  <div style="font-size:90px">ğŸ™‚</div>
  <button class="action" id="fitBtn">Snap Glasses</button>
  <div id="fitResult" class="result">
    <div class="big" id="fitBig"></div>
    <div class="small" id="fitSmall"></div>
  </div>
</div>

<!-- LAUNCH -->
<div id="panelLaunch" class="panel">
  <h3>ğŸ¹ Launch the Eye Drop</h3>
  <button class="action" id="launchBtn">LAUNCH</button>
  <div id="launchResult" class="result">
    <div class="big" id="launchBig"></div>
    <div class="small" id="launchSmall"></div>
  </div>
</div>
</div>

<script>
/* ---------- SHARED ---------- */
function prize(){
  return Math.random()<0.08
    ? {label:"$50 OFF",code:"CONF50"}
    : {label:"20% OFF",code:"CONF20"};
}

/* ---------- TOGGLE ---------- */
const tabs=[
 ["btnScratch","panelScratch"],
 ["btnSpin","panelSpin"],
 ["btnSlots","panelSlots"],
 ["btnFit","panelFit"],
 ["btnLaunch","panelLaunch"]
];

function show(panel){
  tabs.forEach(([b,p])=>{
    document.getElementById(b).classList.toggle("active",p===panel);
    document.getElementById(p).classList.toggle("active",p===panel);
  });
}
tabs.forEach(([b,p])=>{
  document.getElementById(b).onclick=()=>show(p);
});

/* ---------- SCRATCH (REAL SCRATCH-OFF) ---------- */
const c = document.getElementById("scratchCanvas");
const ctx = c.getContext("2d");
const scratchPrize = document.getElementById("scratchPrize");
const scratchReset = document.getElementById("scratchReset");

let scratching = false;

function cover(){
  ctx.globalCompositeOperation = "source-over";
  ctx.clearRect(0,0,c.width,c.height);

  // cover
  ctx.fillStyle = "#bfbfbf";
  ctx.fillRect(0,0,c.width,c.height);

  // text
  ctx.fillStyle = "rgba(0,0,0,0.45)";
  ctx.font = "bold 22px Arial";
  ctx.textAlign = "center";
  ctx.fillText("SCRATCH HERE", c.width/2, c.height/2);

  // scratch mode
  ctx.globalCompositeOperation = "destination-out";
}

function newScratch(){
  const p = prize();
  scratchPrize.textContent = p.label + " (" + p.code + ")";
  cover();
}

function getPos(evt){
  const r = c.getBoundingClientRect();
  const t = evt.touches ? evt.touches[0] : evt;
  return {
    x: (t.clientX - r.left) * (c.width / r.width),
    y: (t.clientY - r.top) * (c.height / r.height),
  };
}

function scratchAt(x,y){
  ctx.beginPath();
  ctx.arc(x,y,20,0,Math.PI*2);
  ctx.fill();
}

c.addEventListener("mousedown", (e)=>{
  scratching = true;
  const p = getPos(e);
  scratchAt(p.x,p.y);
});
c.addEventListener("mousemove", (e)=>{
  if(!scratching) return;
  const p = getPos(e);
  scratchAt(p.x,p.y);
});
window.addEventListener("mouseup", ()=> scratching=false);

c.addEventListener("touchstart", (e)=>{
  scratching = true;
  const p = getPos(e);
  scratchAt(p.x,p.y);
  e.preventDefault();
},{passive:false});

c.addEventListener("touchmove", (e)=>{
  if(!scratching) return;
  const p = getPos(e);
  scratchAt(p.x,p.y);
  e.preventDefault();
},{passive:false});

c.addEventListener("touchend", ()=> scratching=false);

scratchReset.onclick = newScratch;
newScratch();

/* ---------- SPIN ---------- */
document.getElementById("spinBtn").onclick=()=>{
  const p=prize();
  spinBig.textContent="YOU WON "+p.label;
  spinSmall.textContent="Code: "+p.code;
  spinResult.style.display="block";
};

/* ---------- SLOTS ---------- */
document.getElementById("slotsSpin").onclick=()=>{
  const pool=["ğŸ‘“","ğŸ§¿","ğŸ’§","ğŸ”¦","ğŸ“","ğŸ“ˆ"];
  let t=0;
  slotsResult.style.display="none";
  const timer=setInterval(()=>{
    slotIcons.textContent=
      pool[Math.random()*pool.length|0]+" "+
      pool[Math.random()*pool.length|0]+" "+
      pool[Math.random()*pool.length|0];
    if(++t>15){
      clearInterval(timer);
      const p=prize();
      slotsBig.textContent="YOU WON "+p.label;
      slotsSmall.textContent="Code: "+p.code;
      slotsResult.style.display="block";
    }
  },80);
};

/* ---------- GLASSES ---------- */
document.getElementById("fitBtn").onclick=()=>{
  const p=prize();
  fitBig.textContent="YOU WON "+p.label;
  fitSmall.textContent="Code: "+p.code;
  fitResult.style.display="block";
};

/* ---------- LAUNCH ---------- */
document.getElementById("launchBtn").onclick=()=>{
  const p=prize();
  launchBig.textContent="YOU WON "+p.label;
  launchSmall.textContent="Code: "+p.code;
  launchResult.style.display="block";
};
</script>
</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>OD on the GO ‚Äî AOA 2026 Conference Scratcher</title>

<style>
body{
  margin:0;
  font-family: Arial, sans-serif;
  background:#F5F7F9;
}

/* ====== HEADER ====== */
.header{
  background:linear-gradient(90deg,#0F6E8C,#2A9DBB);
  padding:22px 20px;
  color:#fff;
  text-align:center;
}

.header h1{
  margin:0;
  font-size:28px;
  letter-spacing:.5px;
}

.header p{
  margin:6px 0 0;
  font-size:14px;
  opacity:.9;
}

/* logo row */
.logoRow{
  display:flex;
  justify-content:center;
  align-items:center;
  gap:30px;
  margin-top:14px;
  flex-wrap:wrap;
}

.logoBox{
  height:70px;
  display:flex;
  align-items:center;
  justify-content:center;
}

.logoBox img{
  max-height:70px;
  max-width:200px;
}

/* ====== MAIN CARD ====== */
.wrap{
  max-width:950px;
  margin:30px auto;
  padding:0 16px;
}

.card{
  background:#fff;
  border-radius:18px;
  padding:26px;
  box-shadow:0 8px 28px rgba(0,0,0,.08);
  text-align:center;
}

h2{
  margin-top:0;
  color:#2E4A3F;
}

input{
  width:100%;
  max-width:420px;
  padding:12px;
  margin:8px;
  border-radius:10px;
  border:1px solid #ccc;
  font-size:14px;
}

button{
  padding:12px 18px;
  border-radius:10px;
  border:none;
  font-weight:900;
  cursor:pointer;
  margin:8px;
}

.primary{
  background:#2E4A3F;
  color:#fff;
}

.secondary{
  background:#111;
  color:#fff;
}

.ghost{
  background:#eee;
}

button:disabled{
  opacity:.4;
  cursor:not-allowed;
}

.status{
  background:#EAF4F7;
  padding:14px;
  border-radius:12px;
  margin-top:10px;
  font-size:14px;
}

/* ====== SCRATCH CARD ====== */
.scratchWrap{
  margin-top:30px;
}

.scratchArea{
  position:relative;
  width:100%;
  max-width:700px;
  height:280px;
  margin:0 auto;
  border-radius:18px;
  overflow:hidden;
  background:linear-gradient(135deg,#f0f3f6,#e2e8ec);
  display:flex;
  align-items:center;
  justify-content:center;
  text-align:center;
}

.prizeContent{
  position:absolute;
  z-index:1;
  text-align:center;
}

.prizeContent h3{
  margin:0;
  font-size:18px;
  color:#0F6E8C;
}

.prizeContent .big{
  font-size:36px;
  font-weight:900;
  margin-top:8px;
  color:#2E4A3F;
}

.prizeContent .code{
  margin-top:8px;
  font-size:14px;
  color:#333;
}

canvas{
  position:absolute;
  z-index:2;
  width:100%;
  height:100%;
}

/* ====== FOOTER CONTROLS ====== */
.footerControls{
  margin-top:40px;
  padding-top:20px;
  border-top:1px solid #eee;
}
</style>
</head>

<body>

<div class="header">
  <h1>üéâ Scratch to Win</h1>
  <p>AOA Optometry‚Äôs Meeting ‚Ä¢ Phoenix 2026</p>

  <div class="logoRow">
    <!-- Replace src with your hosted images -->
    <div class="logoBox">
      <img src="AOA_LOGO_URL_HERE" alt="AOA Logo">
    </div>

    <div class="logoBox">
      <img src="OD_LOGO_URL_HERE" alt="OD on the GO Logo">
    </div>
  </div>
</div>

<div class="wrap">
<div class="card">

<h2>Enter to Reveal Your Discount</h2>

<input id="name" placeholder="Full Name">
<input id="email" placeholder="Email Address">

<br>
<button class="primary" onclick="saveLead()">Save ‚Äî Scratch Below</button>
<button class="ghost" onclick="nextStudent()">Next Student</button>

<div id="status" class="status" style="display:none;"></div>

<div class="scratchWrap">

<div class="scratchArea">

<div class="prizeContent">
  <h3>üéÅ YOUR PRIZE</h3>
  <div id="prizeText" class="big">‚Äî</div>
  <div id="codeText" class="code"></div>
</div>

<canvas id="scratchCanvas"></canvas>

</div>
</div>

<div class="footerControls">
  <button class="secondary" onclick="exportCSV()">Export CSV</button>
  <button class="ghost" onclick="resetData()">Reset Device Data</button>
</div>

</div>
</div>

<script>
// ================= INVENTORY =================
let inventory = [
  { prize:"FREE PART 1", code:"FREEP1A" },
  { prize:"FREE PART 1", code:"FREEP1B" },
  { prize:"FREE PART 2", code:"FREEP2A" },
  { prize:"FREE PART 2", code:"FREEP2B" },
  { prize:"FREE PART 3", code:"FREEP3A" },
  { prize:"FREE PART 3", code:"FREEP3B" },
];

for(let i=0;i<50;i++){
  inventory.push({prize:"$50 OFF ANY COURSE",code:"AOA50"});
}

for(let i=0;i<50;i++){
  inventory.push({prize:"20% OFF ANY COURSE",code:"AOA20"});
}

inventory = shuffle(inventory);

function shuffle(a){
  for(let i=a.length-1;i>0;i--){
    const j=Math.floor(Math.random()*(i+1));
    [a[i],a[j]]=[a[j],a[i]];
  }
  return a;
}

let leads=[];
let currentPrize=null;

// ================= SAVE LEAD =================
function saveLead(){
  const name=document.getElementById("name").value.trim();
  const email=document.getElementById("email").value.trim();
  if(!name||!email)return;

  if(inventory.length===0){
    alert("All prizes claimed.");
    return;
  }

  currentPrize=inventory.shift();

  leads.push({
    name,email,
    prize:currentPrize.prize,
    code:currentPrize.code,
    time:new Date().toISOString()
  });

  document.getElementById("status").style.display="block";
  document.getElementById("status").innerHTML="Saved ‚úî Now scratch below!";
  document.getElementById("prizeText").innerText=currentPrize.prize;
  document.getElementById("codeText").innerText="Code: "+currentPrize.code;

  initScratch();
}

// ================= SCRATCH =================
function initScratch(){
  const canvas=document.getElementById("scratchCanvas");
  const ctx=canvas.getContext("2d");

  canvas.width=canvas.offsetWidth;
  canvas.height=canvas.offsetHeight;

  ctx.globalCompositeOperation="source-over";
  ctx.fillStyle="#B5BDC3";
  ctx.fillRect(0,0,canvas.width,canvas.height);

  ctx.fillStyle="rgba(0,0,0,0.4)";
  ctx.font="bold 22px Arial";
  ctx.textAlign="center";
  ctx.fillText("SCRATCH HERE",canvas.width/2,canvas.height/2);

  ctx.globalCompositeOperation="destination-out";

  let scratching=false;

  function scratch(e){
    if(!scratching)return;
    const rect=canvas.getBoundingClientRect();
    const x=(e.touches?e.touches[0].clientX:e.clientX)-rect.left;
    const y=(e.touches?e.touches[0].clientY:e.clientY)-rect.top;

    ctx.beginPath();
    ctx.arc(x,y,25,0,Math.PI*2);
    ctx.fill();
  }

  canvas.onmousedown=()=>scratching=true;
  canvas.onmouseup=()=>scratching=false;
  canvas.onmousemove=scratch;

  canvas.ontouchstart=(e)=>{scratching=true;scratch(e);e.preventDefault();}
  canvas.ontouchend=()=>scratching=false;
  canvas.ontouchmove=(e)=>{scratch(e);e.preventDefault();}
}

// ================= NEXT =================
function nextStudent(){
  document.getElementById("name").value="";
  document.getElementById("email").value="";
  document.getElementById("status").style.display="none";
  document.getElementById("prizeText").innerText="‚Äî";
  document.getElementById("codeText").innerText="";
  document.getElementById("scratchCanvas").getContext("2d").clearRect(0,0,9999,9999);
}

// ================= CSV =================
function exportCSV(){
  if(leads.length===0){
    alert("No leads yet.");
    return;
  }

  let csv="Name,Email,Prize,Code,Timestamp\n";
  leads.forEach(l=>{
    csv+=`${l.name},${l.email},${l.prize},${l.code},${l.time}\n`;
  });

  const blob=new Blob([csv],{type:"text/csv"});
  const link=document.createElement("a");
  link.href=URL.createObjectURL(blob);
  link.download="AOA_2026_ODGO_Leads.csv";
  link.click();
}

// ================= RESET =================
function resetData(){
  if(confirm("Reset all leads and inventory?")){
    location.reload();
  }
}
</script>

</body>
</html>
